const fs = require("fs");
const express = require("express");
const app = express();
app.use(express.json());
app.post("/api/addPatient", (req, res) => {
    const patient = req.body;
    const data = JSON.parse(fs.readFileSync("database.json"));
    data.patients.push(patient);
    fs.writeFileSync("database.json", JSON.stringify(data, null, 2));
    res.status(201).send("Patient added");
});
app.post("/api/addDoctor", (req, res) => {
    const doctor = req.body;
    const data = JSON.parse(fs.readFileSync("database.json"));
    data.doctors.push(doctor);
    fs.writeFileSync("database.json", JSON.stringify(data, null, 2));
    res.status(201).send("Doctor added");
});
app.post("/api/addAppointment", (req, res) => {
    const appointment = req.body;
    const data = JSON.parse(fs.readFileSync("database.json"));
    data.appointments.push(appointment);
    fs.writeFileSync("database.json", JSON.stringify(data, null, 2));
    res.status(201).send("Appointment added");
});
app.get("/api/getPatients", (req, res) => {
    const data = JSON.parse(fs.readFileSync("database.json"));
    res.json(data.patients);
});
app.get("/api/getDoctors", (req, res) => {
    const data = JSON.parse(fs.readFileSync("database.json"));
    res.json(data.doctors);
});
app.get("/api/getAppointments", (req, res) => {
    const data = JSON.parse(fs.readFileSync("database.json"));
    res.json(data.appointments);
});
app.use(express.static("public"));

app.listen(3000, () => console.log("Server running"));
app.get("/api/getData", (req, res) => {
    const data = {
        patients: 120,
        doctors: 25,
        appointments: 75
    };
    res.json(data);
});
app.use(express.static("public"));
